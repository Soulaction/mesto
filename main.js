(()=>{"use strict";var t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit",inactiveButtonClass:"popup__btn-submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},e={name:document.querySelector(".profile__nike-name"),about:document.querySelector(".profile__discription"),avatar:document.querySelector(".profile__avatar")},n=document.querySelector(".profile__edit-btn"),r=document.querySelector(".profile__add-btn"),o=document.querySelector(".profile__avatar-edit-btn"),i=document.querySelector(".popup_type_profile-edit"),u=i.querySelector(".popup__form_type_profile-edit"),a=document.querySelector(".popup_type_update-avatar"),c=a.querySelector(".popup__form_type_update-avatar"),l=document.querySelector(".popup_type_card-create"),s=l.querySelector(".popup__form_type_card-edit"),f=document.querySelector(".popup_type_view-card"),p=document.querySelector(".popup_type_confirm");function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}p.querySelector(".popup__form_type_confirm");var d=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"addItem",value:function(t){this._container.prepend(this._renderer(t))}},{key:"renderItems",value:function(){var t=this;this.clear(),this._items.reverse().forEach((function(e){t.addItem(e)}))}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}var b=function(){function t(e,n,r,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=e._id,this._name=e.name,this._link=e.link,this._likes=e.likes,this._userId=r.id,this._templateSelector=n,this._handleOpenViewCard=o,this._handleConfirmDialog=i,this._handleLike=u,this._isMyCard=e.owner._id===r.id}var e,n;return e=t,(n=[{key:"_getTamlateCard",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCard",value:function(){return this._card=this._getTamlateCard(),this._imgCard=this._card.querySelector(".element__img"),this._likeCard=this._card.querySelector(".element__like"),this.isLike()&&this._likeCard.classList.add("element__like_active"),this._buttonDeleteCard=this._card.querySelector(".element__bucket"),this._isMyCard||(this._buttonDeleteCard.style.display="none"),this._nameCard=this._card.querySelector(".element__name-picture"),this._countLikesElement=this._card.querySelector(".element__like-count"),this._imgCard.src=this._link,this._imgCard.alt="Картинка "+this._name,this._nameCard.textContent=this._name,this._countLikesElement.textContent=this._likes.length,this._setEventListeners(),this._card}},{key:"isLike",value:function(){var t=this;return!!this._likes.find((function(e){return e._id===t._userId}))}},{key:"_setEventListeners",value:function(){var t=this;this._likeCard.addEventListener("click",(function(){t._handleSetLikeOnCard()})),this._imgCard.addEventListener("click",(function(){t._handleOpenViewCard()})),this._isMyCard&&this._buttonDeleteCard.addEventListener("click",(function(){t._handleConfirmDialog(t._id,(function(){return t._handleDeleteCard()}))}))}},{key:"_handleSetLikeOnCard",value:function(){var t=this;this._handleLike(this._id).then((function(e){t._countLikesElement.textContent=e.likes.length,t._likes=e.likes,t._likeCard.classList.toggle("element__like_active")})).catch((function(t){return console.log(t)}))}},{key:"_handleDeleteCard",value:function(){this._card.remove()}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._validationConfig=e,this._form=n,this._fieldFormList=Array.from(this._form.querySelectorAll(this._validationConfig.inputSelector)),this._buttonForm=this._form.querySelector(this._validationConfig.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.add(this._validationConfig.inputErrorClass),e.classList.add(this._validationConfig.errorClass),e.textContent=t.validationMessage}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._validationConfig.inputErrorClass),e.classList.remove(this._validationConfig.errorClass),e.textContent=""}},{key:"_checkValidateInputForm",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_checkValidateForm",value:function(){return this._fieldFormList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._checkValidateForm()?(this._buttonForm.classList.add(this._validationConfig.inactiveButtonClass),this._buttonForm.setAttribute("disabled",!0)):(this._buttonForm.classList.remove(this._validationConfig.inactiveButtonClass),this._buttonForm.removeAttribute("disabled"))}},{key:"rebootForm",value:function(){var t=this;this._fieldFormList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}},{key:"_setEventValidateListener",value:function(){var t=this;this._fieldFormList.forEach((function(e){e.addEventListener("input",(function(){t._checkValidateInputForm(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventValidateListener()}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}var C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=e,this._closeButtons=this._popupElement.querySelector(".popup__btn-close")}var e,n;return e=t,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose.bind(this),{once:!0}),this._popupElement.classList.add("popup_opened")}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"_handleClickAreaClose",value:function(t){this._popupElement===t.target&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._closeButtons.addEventListener("click",(function(){return t.close()})),this._popupElement.addEventListener("mousedown",(function(e){return t._handleClickAreaClose(e)}))}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupCardImg=e._popupElement.querySelector(".popup__img-card"),e._popupCardName=e._popupElement.querySelector(".popup__name-card"),e}return e=u,(n=[{key:"open",value:function(t){j(L(u.prototype),"open",this).call(this),this._popupCardName.textContent=t.name,this._popupCardImg.alt=t.name,this._popupCardImg.src=t.link}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(C);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(o){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._listInputForm=Array.from(n._popupElement.querySelectorAll(".popup__input")),n._submitFormHandler=e,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._valuesInputForm={},this._listInputForm.forEach((function(e){var n=e.name,r=e.value;t._valuesInputForm[n]=r})),this._valuesInputForm}},{key:"setInputValues",value:function(t){this._listInputForm.forEach((function(e){e.name in t&&(e.value=t[e.name])}))}},{key:"setEventListeners",value:function(){var t=this;F(x(u.prototype),"setEventListeners",this).call(this),this._form=this._popupElement.querySelector(".popup__form"),this.btnSubmit=this._popupElement.querySelector(".popup__btn-submit"),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitFormHandler(t._getInputValues()),t.btnSubmit.textContent="Сохранение..."}))}},{key:"close",value:function(){this._form.reset(),F(x(u.prototype),"close",this).call(this)}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(C);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},V.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(r);if(o){var n=z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleConfirm=e,n}return e=u,(n=[{key:"open",value:function(t,e){this._id=t,this._extendForHandleConfirm=e||function(){},V(z(u.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;V(z(u.prototype),"setEventListeners",this).call(this),this._form=this._popupElement.querySelector(".popup__form"),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleConfirm(t._id).then((function(e){console.log(e),t._extendForHandleConfirm()})).catch((function(t){return console.log(t)})),t.close()}))}}])&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(C);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==H(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===H(o)?o:String(o)),r)}var o}var J=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._about=e.about,this._avatar=e.avatar}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){var t={};return t.id=this._id,t.name=this._name.textContent,t.about=this._about.textContent,t.avatar=this._avatar.src,t}},{key:"setUserInfo",value:function(t){this._id=t._id,this._name.textContent=t.name,this._about.textContent=t.about,this._avatar.src=t.avatar}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}var K=new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=e.baseUrl,this.token=e.headers.authorization,this.contentType=e.headers["Content-Type"]}var e,n;return e=t,(n=[{key:"_fetch",value:function(t,e){return fetch(this.baseUrl+t,e).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"getInitialCards",value:function(){return this._fetch("/cards",{method:"GET",headers:{authorization:this.token}})}},{key:"getUserInfo",value:function(){return this._fetch("/users/me",{method:"GET",headers:{authorization:this.token}})}},{key:"updateUserInfo",value:function(t){var e=t.name,n=t.about;return this._fetch("/users/me",{method:"PATCH",headers:{authorization:this.token,"Content-Type":this.contentType},body:JSON.stringify({name:e,about:n})})}},{key:"updateAvatarUser",value:function(t){var e=t.avatar;return this._fetch("/users/me/avatar",{method:"PATCH",headers:{authorization:this.token,"Content-Type":this.contentType},body:JSON.stringify({avatar:e})})}},{key:"addNewCard",value:function(t){var e=t.name,n=t.link;return this._fetch("/cards",{method:"POST",headers:{authorization:this.token,"Content-Type":this.contentType},body:JSON.stringify({name:e,link:n})})}},{key:"deleteCard",value:function(t){return this._fetch("/cards/".concat(t),{method:"DELETE",headers:{authorization:this.token}})}},{key:"setLike",value:function(t){return this._fetch("/cards/".concat(t,"/likes"),{method:"PUT",headers:{authorization:this.token}})}},{key:"deleteLike",value:function(t){return this._fetch("/cards/".concat(t,"/likes"),{method:"DELETE",headers:{authorization:this.token}})}}])&&$(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66",headers:{authorization:"d3622e91-6a1b-4880-942f-1e681389a2d9","Content-Type":"application/json"}});function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W,X=new J(e),Y=new g(t,u);Y.enableValidation();var Z=new g(t,s);Z.enableValidation(),new g(t,c).enableValidation(),Promise.all([K.getUserInfo(),K.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];X.setUserInfo(o),(W=new d({items:i,renderer:function(t){return function(t){var e=new b(t,"#card",X.getUserInfo(),(function(){return tt.open(t)}),(function(t,e){return ot.open(t,e)}),(function(t){return e.isLike()?K.deleteLike(t):K.setLike(t)}));return e.createCard()}(t)}},".elements-list")).renderItems()})).catch((function(t){return console.log("Ошибка: "+t)}));var tt=new I(f);tt.setEventListeners();var et=new U(l,(function(t){K.addNewCard(t).then((function(t){W.addItem(t),et.close()})).catch((function(t){return console.log(t)})).finally((function(){return et.btnSubmit.textContent="Cохранить"}))}));et.setEventListeners();var nt=new U(i,(function(t){K.updateUserInfo(t).then((function(t){X.setUserInfo(t),nt.close()})).catch((function(t){return console.log(t)})).finally((function(){return nt.btnSubmit.textContent="Cохранить"}))}));nt.setEventListeners();var rt=new U(a,(function(t){K.updateAvatarUser(t).then((function(t){X.setUserInfo(t),rt.close()})).catch((function(t){return console.log(t)})).finally((function(){return rt.btnSubmit.textContent="Cохранить"}))}));rt.setEventListeners();var ot=new N(p,(function(t){return K.deleteCard(t)}));ot.setEventListeners(),n.addEventListener("click",(function(){nt.setInputValues(X.getUserInfo()),Y.rebootForm(),nt.open()})),r.addEventListener("click",(function(){Z.rebootForm(),et.open()})),o.addEventListener("click",(function(){rt.setInputValues(X.getUserInfo()),Z.rebootForm(),rt.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RWpCLElBQU1RLEdBQW9CLElBQUlyRSxFQUFjaEksR0FBbUIsU0FBQzZCLEdBQzlEc0gsRUFBSXRKLGlCQUFpQmdDLEdBQ2xCMkMsTUFBSyxTQUFBNEgsR0FDSnhCLEVBQUtRLFlBQVlnQixHQUNqQkMsR0FBa0JuRixPQUNwQixJQUNDdkMsT0FBTSxTQUFBQyxHQUFHLE9BQUlDLFFBQVFDLElBQUlGLEVBQUksSUFDN0JxSCxTQUFRLGtCQUFNSSxHQUFrQi9ELFVBQVV2RSxZQUFjLFdBQVcsR0FDeEUsSUFDQXNJLEdBQWtCUixvQkFFbEIsSUFBTU4sR0FBZSxJQUFJN0MsRUFBYXJJLEdBQXNCLFNBQUNxSyxHQUMzRCxPQUFPdkIsRUFBSW1ELFdBQVc1QixFQUN4QixJQUNBYSxHQUFhTSxvQkFFYmxNLEVBQWtCeUUsaUJBQWlCLFNBQVMsV0FDMUM4SCxHQUFpQkssZUFBZTNCLEVBQUtLLGVBQ3JDSixFQUFvQjJCLGFBQ3BCTixHQUFpQlosTUFDbkIsSUFFQTFMLEVBQWlCd0UsaUJBQWlCLFNBQVMsV0FDekMyRyxFQUFtQnlCLGFBQ25CVixHQUFnQlIsTUFDbEIsSUFFQXpMLEVBQWlCdUUsaUJBQWlCLFNBQVMsV0FDekNpSSxHQUFrQkUsZUFBZTNCLEVBQUtLLGVBQ3RDRixFQUFtQnlCLGFBQ25CSCxHQUFrQmYsTUFDcEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J0bi1zdWJtaXQnLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnRuLXN1Ym1pdF9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yU2VjdGlvbiA9ICcuZWxlbWVudHMtbGlzdCc7XHJcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZVNlbGVjdG9yID0gJyNjYXJkJztcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VyQ29uZmlnID0ge1xyXG4gIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uaWtlLW5hbWUnKSxcclxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rpc2NyaXB0aW9uJyksXHJcbiAgYXZhdGFyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyksXHJcblxyXG59O1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ0bicpO1xyXG5leHBvcnQgY29uc3QgdXBkYXRlQXZhdGFyVXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItZWRpdC1idG4nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBwb3B1cFByb2ZpbGVFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX3Byb2ZpbGUtZWRpdCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfdXBkYXRlLWF2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgZm9ybVVwZGF0ZUF2YXRhciA9IHBvcHVwVXBkYXRlQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX3VwZGF0ZS1hdmF0YXInKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRDcmVhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9jYXJkLWNyZWF0ZScpO1xyXG5leHBvcnQgY29uc3QgZm9ybUNyZWF0ZUNhcmQgPSBwb3B1cENhcmRDcmVhdGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX3R5cGVfY2FyZC1lZGl0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBWaWV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3ZpZXctY2FyZCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfY29uZmlybScpO1xyXG5leHBvcnQgY29uc3QgZm9ybUNvbmZpcm1TZWxlY3RvciA9IHBvcHVwQ29uZmlybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2NvbmZpcm0nKTtcclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3JTZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JTZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQodGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoY2FyZCwgdGVtcGxhdGVTZWxlY3RvciwgdXNlckluZm8sIGhhbmRsZU9wZW5WaWV3Q2FyZCwgaGFuZGxlQ29uZmlybURpYWxvZywgaGFuZGxlTGlrZSkge1xyXG4gICAgICAgIHRoaXMuX2lkID0gY2FyZC5faWQ7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNhcmQubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gY2FyZC5saW5rO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gY2FyZC5saWtlcztcclxuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySW5mby5pZDtcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVPcGVuVmlld0NhcmQgPSBoYW5kbGVPcGVuVmlld0NhcmQ7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybURpYWxvZyA9IGhhbmRsZUNvbmZpcm1EaWFsb2c7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XHJcbiAgICAgICAgdGhpcy5faXNNeUNhcmQgPSBjYXJkLm93bmVyLl9pZCA9PT0gdXNlckluZm8uaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRhbWxhdGVDYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50Q2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUYW1sYXRlQ2FyZCgpO1xyXG4gICAgICAgIHRoaXMuX2ltZ0NhcmQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWcnKVxyXG4gICAgICAgIHRoaXMuX2xpa2VDYXJkID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2VDYXJkLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idWNrZXQnKTtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzTXlDYXJkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX25hbWVDYXJkID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbmFtZS1waWN0dXJlJyk7XHJcbiAgICAgICAgdGhpcy5fY291bnRMaWtlc0VsZW1lbnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50Jyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2ltZ0NhcmQuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9pbWdDYXJkLmFsdCA9ICfQmtCw0YDRgtC40L3QutCwICcgKyB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX25hbWVDYXJkLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9jb3VudExpa2VzRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBpc0xpa2UoKSB7XHJcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fbGlrZXMuZmluZCgoeyBfaWQgfSkgPT4gX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9saWtlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU2V0TGlrZU9uQ2FyZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2ltZ0NhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZU9wZW5WaWV3Q2FyZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLl9pc015Q2FyZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25EZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybURpYWxvZyh0aGlzLl9pZCwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVTZXRMaWtlT25DYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcy5faWQpXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb3VudExpa2VzRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlcztcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VDYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm0pIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0aW9uQ29uZmlnID0gdmFsaWRhdGlvbkNvbmZpZztcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgICAgICB0aGlzLl9maWVsZEZvcm1MaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRm9ybSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRGb3JtKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEZvcm0uaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRGb3JtLmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRGb3JtLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRGb3JtKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEZvcm0uaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRGb3JtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9O1xyXG5cclxuICAgIF9jaGVja1ZhbGlkYXRlSW5wdXRGb3JtKGlucHV0KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tWYWxpZGF0ZUZvcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpZWxkRm9ybUxpc3Quc29tZShmaWVsZCA9PiAhZmllbGQudmFsaWRpdHkudmFsaWQpXHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jaGVja1ZhbGlkYXRlRm9ybSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkZvcm0uY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25Gb3JtLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25Gb3JtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRm9ybS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlYm9vdEZvcm0oKSB7XHJcbiAgICAgICAgdGhpcy5fZmllbGRGb3JtTGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRWYWxpZGF0ZUxpc3RlbmVyKCkge1xyXG4gICAgICAgIHRoaXMuX2ZpZWxkRm9ybUxpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGF0ZUlucHV0Rm9ybShpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRWYWxpZGF0ZUxpc3RlbmVyKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9ucyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J0bi1jbG9zZScpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyksIHsgb25jZTogdHJ1ZSB9KTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlQ2xpY2tBcmVhQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3BvcHVwRWxlbWVudCA9PT0gZXZ0LnRhcmdldCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHRoaXMuX2hhbmRsZUNsaWNrQXJlYUNsb3NlKGV2dCkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl9wb3B1cENhcmRJbWcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWctY2FyZCcpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2FyZE5hbWUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19uYW1lLWNhcmQnKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGNhcmRJbmZvKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2FyZE5hbWUudGV4dENvbnRlbnQgPSBjYXJkSW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2FyZEltZy5hbHQgPSBjYXJkSW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2FyZEltZy5zcmMgPSBjYXJkSW5mby5saW5rO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQsIHN1Ym1pdEZvcm1IYW5kbGVyKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl9saXN0SW5wdXRGb3JtID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtSGFuZGxlciA9IHN1Ym1pdEZvcm1IYW5kbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZXNJbnB1dEZvcm0gPSB7fTtcclxuICAgICAgICB0aGlzLl9saXN0SW5wdXRGb3JtLmZvckVhY2goKHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZXNJbnB1dEZvcm1bbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVzSW5wdXRGb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIHNldElucHV0VmFsdWVzKGlucHV0VmFsdWVzKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdElucHV0Rm9ybS5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQubmFtZSBpbiBpbnB1dFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgICAgICB0aGlzLmJ0blN1Ym1pdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J0bi1zdWJtaXQnKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEZvcm1IYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmJ0blN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50LCBoYW5kbGVDb25maXJtKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gaGFuZGxlQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGlkLCBleHRlbmRGb3JIYW5kbGVDb25maXJtKSB7XHJcbiAgICAgICAgdGhpcy5faWQgPSBpZDtcclxuICAgICAgICB0aGlzLl9leHRlbmRGb3JIYW5kbGVDb25maXJtID0gZXh0ZW5kRm9ySGFuZGxlQ29uZmlybSA/IGV4dGVuZEZvckhhbmRsZUNvbmZpcm0gOiAoKSA9PiB7IH07XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNvbmZpcm0odGhpcy5faWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9leHRlbmRGb3JIYW5kbGVDb25maXJtKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTs7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyQ29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IHVzZXJDb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLl9hYm91dCA9IHVzZXJDb25maWcuYWJvdXQ7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gdXNlckNvbmZpZy5hdmF0YXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgdXNlckluZm8gPSB7fTtcclxuICAgICAgICB1c2VySW5mby5pZCA9IHRoaXMuX2lkO1xyXG4gICAgICAgIHVzZXJJbmZvLm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xyXG4gICAgICAgIHVzZXJJbmZvLmFib3V0ID0gdGhpcy5fYWJvdXQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdXNlckluZm8uYXZhdGFyID0gdGhpcy5fYXZhdGFyLnNyYztcclxuICAgICAgICByZXR1cm4gdXNlckluZm87XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8odXNlckluZm8pIHtcclxuICAgICAgICB0aGlzLl9pZCA9IHVzZXJJbmZvLl9pZDtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcclxuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xyXG4gICAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSB1c2VySW5mby5hdmF0YXI7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy50b2tlbiA9IG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgICAgIHRoaXMuY29udGVudFR5cGUgPSBvcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddO1xyXG4gICAgfVxyXG5cclxuICAgIF9mZXRjaCh1cmwsIG9wdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyB1cmwsIG9wdGlvbilcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKCcvY2FyZHMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mZXRjaCgnL3VzZXJzL21lJywge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2goJy91c2Vycy9tZScsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IHRoaXMuY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQXZhdGFyVXNlcih7IGF2YXRhciB9KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKCcvdXNlcnMvbWUvYXZhdGFyJywge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogdGhpcy5jb250ZW50VHlwZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKCcvY2FyZHMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IHRoaXMuY29udGVudFR5cGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mZXRjaChgL2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy50b2tlblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2goYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMudG9rZW5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKGAvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLy/QodC+0LfQtNCw0L3QuNC1INC+0LHRitC10LrRgtCwIEFQSVxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02NicsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246ICdkMzYyMmU5MS02YTFiLTQ4ODAtOTQyZi0xZTY4MTM4OWEyZDknLFxyXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9XHJcbiAgfSk7ICIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgc2VsZWN0b3JTZWN0aW9uLFxyXG4gIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgdXNlckNvbmZpZyxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBjcmVhdGVDYXJkQnV0dG9uLFxyXG4gIHVwZGF0ZUF2YXRhclVzZXIsXHJcbiAgcG9wdXBQcm9maWxlRWRpdCxcclxuICBmb3JtRWRpdFByb2ZpbGUsXHJcbiAgcG9wdXBDYXJkQ3JlYXRlLFxyXG4gIGZvcm1DcmVhdGVDYXJkLFxyXG4gIHBvcHVwVmlld0NhcmQsXHJcbiAgcG9wdXBVcGRhdGVBdmF0YXIsXHJcbiAgZm9ybVVwZGF0ZUF2YXRhcixcclxuICBwb3B1cENvbmZpcm1TZWxlY3RvclxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcydcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyc7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbi8v0KHQvtC30LTQsNC90LjQtSDQvtCx0YrQtdC60YLQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh1c2VyQ29uZmlnKTtcclxubGV0IHNlY3Rpb25DYXJkcztcclxuXHJcbi8v0KTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgdXNlci5nZXRVc2VySW5mbygpLFxyXG4gICAgKCkgPT4gcG9wdXBWaWV30KFhcmRJbWFnZS5vcGVuKGl0ZW0pLFxyXG4gICAgKGlkLCBleHRlbmRGb3JIYW5kbGVDb25maXJtKSA9PiBwb3B1cENvbmZpcm0ub3BlbihpZCwgZXh0ZW5kRm9ySGFuZGxlQ29uZmlybSksXHJcbiAgICAoaWQpID0+IHtcclxuICAgICAgaWYgKGNhcmQuaXNMaWtlKCkpIHtcclxuICAgICAgICByZXR1cm4gYXBpLmRlbGV0ZUxpa2UoaWQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhcGkuc2V0TGlrZShpZCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgKTtcclxuICBjb25zdCBuZXdDYXJkID0gY2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIG5ld0NhcmQ7XHJcbn1cclxuXHJcbi8v0KPRgdGC0LDQvdC+0LLQutCwINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxyXG5jb25zdCB2YWxpZGF0ZUVkaXRQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVkaXRQcm9maWxlKTtcclxudmFsaWRhdGVFZGl0UHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IHZhbGlkYXRlQ3JlYXRlQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1DcmVhdGVDYXJkKTtcclxudmFsaWRhdGVDcmVhdGVDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgdmFsaWRhdGVBdmF0YXJVc2VyID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVVwZGF0ZUF2YXRhcik7XHJcbnZhbGlkYXRlQXZhdGFyVXNlci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL9Cf0L7Qu9GD0YfQtdC90LjQtSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0Lgg0YDQtdC90LTQtdGA0LjQvdCzINC60LDRgNGC0L7Rh9C10LpcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckluZm8sIGNhcmRzXSkgPT4ge1xyXG4gICAgdXNlci5zZXRVc2VySW5mbyh1c2VySW5mbyk7XHJcbiAgICBzZWN0aW9uQ2FyZHMgPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHJlbmRlckNhcmQoaXRlbSlcclxuICAgICAgfSxcclxuICAgICAgc2VsZWN0b3JTZWN0aW9uXHJcbiAgICApO1xyXG4gICAgc2VjdGlvbkNhcmRzLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LA6ICcgKyBlcnIpKTtcclxuXHJcbi8v0KHQvtC30LTQsNC90LjQtSDQvNC+0LTQsNC70YzQvdGL0YUg0L7QutC+0L1cclxuY29uc3QgcG9wdXBWaWV30KFhcmRJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFZpZXdDYXJkKTtcclxucG9wdXBWaWV30KFhcmRJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXDQoWFyZNChcmVhdGUgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cENhcmRDcmVhdGUsIChjYXJkKSA9PiB7XHJcbiAgYXBpLmFkZE5ld0NhcmQoY2FyZClcclxuICAgIC50aGVuKHJlZnJlc2hDYXJkID0+IHtcclxuICAgICAgc2VjdGlvbkNhcmRzLmFkZEl0ZW0ocmVmcmVzaENhcmQpO1xyXG4gICAgICBwb3B1cNChYXJk0KFyZWF0ZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHBvcHVw0KFhcmTQoXJlYXRlLmJ0blN1Ym1pdC50ZXh0Q29udGVudCA9ICdD0L7RhdGA0LDQvdC40YLRjCcpO1xyXG59KTtcclxucG9wdXDQoWFyZNChcmVhdGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBQcm9maWxlRWRpdCwgKHVzZXJJbmZvKSA9PiB7XHJcbiAgYXBpLnVwZGF0ZVVzZXJJbmZvKHVzZXJJbmZvKVxyXG4gICAgLnRoZW4ocmVmcmVzaFVzZXIgPT4ge1xyXG4gICAgICB1c2VyLnNldFVzZXJJbmZvKHJlZnJlc2hVc2VyKTtcclxuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHBvcHVwRWRpdFByb2ZpbGUuYnRuU3VibWl0LnRleHRDb250ZW50ID0gJ0PQvtGF0YDQsNC90LjRgtGMJyk7XHJcbn0pO1xyXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEF2YXRhclVwZGF0ZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwVXBkYXRlQXZhdGFyLCAodXNlckluZm8pID0+IHtcclxuICBhcGkudXBkYXRlQXZhdGFyVXNlcih1c2VySW5mbylcclxuICAgIC50aGVuKHJlZnJlc2hVc2VyID0+IHtcclxuICAgICAgdXNlci5zZXRVc2VySW5mbyhyZWZyZXNoVXNlcik7XHJcbiAgICAgIHBvcHVwQXZhdGFyVXBkYXRlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gcG9wdXBBdmF0YXJVcGRhdGUuYnRuU3VibWl0LnRleHRDb250ZW50ID0gJ0PQvtGF0YDQsNC90LjRgtGMJyk7XHJcbn0pO1xyXG5wb3B1cEF2YXRhclVwZGF0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybShwb3B1cENvbmZpcm1TZWxlY3RvciwgKGNhcmRJZCkgPT4ge1xyXG4gIHJldHVybiBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpO1xyXG59KTtcclxucG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKHVzZXIuZ2V0VXNlckluZm8oKSk7XHJcbiAgdmFsaWRhdGVFZGl0UHJvZmlsZS5yZWJvb3RGb3JtKCk7XHJcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY3JlYXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB2YWxpZGF0ZUNyZWF0ZUNhcmQucmVib290Rm9ybSgpO1xyXG4gIHBvcHVw0KFhcmTQoXJlYXRlLm9wZW4oKTtcclxufSk7XHJcblxyXG51cGRhdGVBdmF0YXJVc2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyVXBkYXRlLnNldElucHV0VmFsdWVzKHVzZXIuZ2V0VXNlckluZm8oKSk7XHJcbiAgdmFsaWRhdGVDcmVhdGVDYXJkLnJlYm9vdEZvcm0oKTtcclxuICBwb3B1cEF2YXRhclVwZGF0ZS5vcGVuKCk7XHJcbn0pOyJdLCJuYW1lcyI6WyJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ1c2VyQ29uZmlnIiwibmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFib3V0IiwiYXZhdGFyIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJjcmVhdGVDYXJkQnV0dG9uIiwidXBkYXRlQXZhdGFyVXNlciIsInBvcHVwUHJvZmlsZUVkaXQiLCJmb3JtRWRpdFByb2ZpbGUiLCJwb3B1cFVwZGF0ZUF2YXRhciIsImZvcm1VcGRhdGVBdmF0YXIiLCJwb3B1cENhcmRDcmVhdGUiLCJmb3JtQ3JlYXRlQ2FyZCIsInBvcHVwVmlld0NhcmQiLCJwb3B1cENvbmZpcm1TZWxlY3RvciIsIlNlY3Rpb24iLCJfcmVmIiwic2VsZWN0b3JTZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwia2V5IiwidmFsdWUiLCJpbm5lckhUTUwiLCJpdGVtIiwicHJlcGVuZCIsIl90aGlzIiwiY2xlYXIiLCJyZXZlcnNlIiwiZm9yRWFjaCIsImFkZEl0ZW0iLCJDYXJkIiwiY2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJ1c2VySW5mbyIsImhhbmRsZU9wZW5WaWV3Q2FyZCIsImhhbmRsZUNvbmZpcm1EaWFsb2ciLCJoYW5kbGVMaWtlIiwiX2lkIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl91c2VySWQiLCJpZCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZU9wZW5WaWV3Q2FyZCIsIl9oYW5kbGVDb25maXJtRGlhbG9nIiwiX2hhbmRsZUxpa2UiLCJfaXNNeUNhcmQiLCJvd25lciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZCIsIl9nZXRUYW1sYXRlQ2FyZCIsIl9pbWdDYXJkIiwiX2xpa2VDYXJkIiwiaXNMaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2J1dHRvbkRlbGV0ZUNhcmQiLCJzdHlsZSIsImRpc3BsYXkiLCJfbmFtZUNhcmQiLCJfY291bnRMaWtlc0VsZW1lbnQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZpbmQiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZVNldExpa2VPbkNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl90aGlzMyIsInRoZW4iLCJyZXMiLCJ0b2dnbGUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsIl92YWxpZGF0aW9uQ29uZmlnIiwiX2Zvcm0iLCJfZmllbGRGb3JtTGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRm9ybSIsImlucHV0Rm9ybSIsImVycm9yTWVzc2FnZSIsImNvbmNhdCIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsImZpZWxkIiwiX2NoZWNrVmFsaWRhdGVGb3JtIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrVmFsaWRhdGVJbnB1dEZvcm0iLCJfc2V0RXZlbnRWYWxpZGF0ZUxpc3RlbmVyIiwiUG9wdXAiLCJwb3B1cEVsZW1lbnQiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9ucyIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvbmNlIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJfaGFuZGxlQ2xpY2tBcmVhQ2xvc2UiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfcG9wdXBDYXJkSW1nIiwiX3BvcHVwQ2FyZE5hbWUiLCJjYXJkSW5mbyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybUhhbmRsZXIiLCJfbGlzdElucHV0Rm9ybSIsIl9zdWJtaXRGb3JtSGFuZGxlciIsIl92YWx1ZXNJbnB1dEZvcm0iLCJpbnB1dFZhbHVlcyIsImJ0blN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cENvbmZpcm0iLCJoYW5kbGVDb25maXJtIiwiX2hhbmRsZUNvbmZpcm0iLCJleHRlbmRGb3JIYW5kbGVDb25maXJtIiwiX2V4dGVuZEZvckhhbmRsZUNvbmZpcm0iLCJkYXRhIiwiVXNlckluZm8iLCJfYWJvdXQiLCJfYXZhdGFyIiwiYXBpIiwiQXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJ0b2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiY29udGVudFR5cGUiLCJ1cmwiLCJvcHRpb24iLCJmZXRjaCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl9yZWYyIiwiX3JlZjMiLCJjYXJkSWQiLCJzZWN0aW9uQ2FyZHMiLCJ1c2VyIiwidmFsaWRhdGVFZGl0UHJvZmlsZSIsImVuYWJsZVZhbGlkYXRpb24iLCJ2YWxpZGF0ZUNyZWF0ZUNhcmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwic2V0VXNlckluZm8iLCJwb3B1cFZpZXfQoWFyZEltYWdlIiwib3BlbiIsInBvcHVwQ29uZmlybSIsImRlbGV0ZUxpa2UiLCJzZXRMaWtlIiwiY3JlYXRlQ2FyZCIsInJlbmRlckNhcmQiLCJyZW5kZXJJdGVtcyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXDQoWFyZNChcmVhdGUiLCJhZGROZXdDYXJkIiwicmVmcmVzaENhcmQiLCJmaW5hbGx5IiwicG9wdXBFZGl0UHJvZmlsZSIsInVwZGF0ZVVzZXJJbmZvIiwicmVmcmVzaFVzZXIiLCJwb3B1cEF2YXRhclVwZGF0ZSIsImRlbGV0ZUNhcmQiLCJzZXRJbnB1dFZhbHVlcyIsInJlYm9vdEZvcm0iXSwic291cmNlUm9vdCI6IiJ9